---
import Layout from './Layout.astro';
import type { CollectionEntry } from 'astro:content';

interface Props {
	entry: CollectionEntry<'workbench'>;
}

const { entry } = Astro.props;
const { data, slug } = entry;

const links = [
  { href: data.repoUrl, text: 'View Repository' },
];
if (data.liveUrl) {
  links.push({ href: data.liveUrl, text: 'View Live Site' });
}
---
<Layout title={`${data.title} :: Collins`}>
  <article class="max-w-5xl mx-auto p-8">
    
    <header class="mb-12">
      <img 
        src={data.heroImage} 
        alt={`Hero image for ${data.title}`}
        class="w-full h-96 object-cover rounded-2xl shadow-2xl"
        transition:name={`hero-${slug}`} 
      />

      <h1 
        class="text-5xl md:text-7xl font-bold mt-12 mb-4"
        transition:name={`title-${slug}`}
      >
        {data.title}
      </h1>
      <p class="text-2xl text-slate-600 dark:text-slate-300">
        {data.subtitle}
      </p>
    </header>

    <aside class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
      <div class="md:col-span-1">
        <h3 class="text-lg font-semibold uppercase text-slate-500 dark:text-slate-400 mb-4">Links</h3>
        <div class="flex flex-col items-start gap-3">
          {links.map(link => (
            <a 
              href={link.href} 
              target="_blank" 
              rel="noopener noreferrer"
              class="text-lg text-blue-600 dark:text-blue-400 font-medium hover:underline"
            >
              {link.text} &rarr;
            </a>
          ))}
        </div>
      </div>
      
      <div class="md:col-span-2">
        <h3 class="text-lg font-semibold uppercase text-slate-500 dark:text-slate-400 mb-4">Technology Stack</h3>
        <div class="flex flex-wrap gap-3">
          {data.techStack.map(tech => (
            <span class="text-base font-medium bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 py-2 px-4 rounded-full">
              {tech}
            </span>
          ))}
        </div>
      </div>
    </aside>

    <section class="prose prose-lg dark:prose-invert max-w-none mb-12 p-8 bg-slate-50 dark:bg-slate-800 rounded-2xl">
      <h2 class="text-3xl font-bold mt-0">The Spark</h2>
      <p class="text-xl !mt-4">{data.theSpark}</p>
      
      <h2 class="text-3xl font-bold">Key Insights</h2>
      <ul class="text-lg">
        {data.keyInsights.map(insight => <li>{insight}</li>)}
      </ul>
    </section>

    <section class="prose prose-lg dark:prose-invert max-w-none text-slate-700 dark:text-slate-300">
      <h2 class="text-3xl font-bold">The "Chain Reaction" Story</h2>
      <slot />
    </section>

  </article>
</Layout>